<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>redux | Daemon's Home</title><meta name="description" content="Just playing around">
    <link rel="modulepreload" href="/assets/app-4f7908e3.js"><link rel="modulepreload" href="/assets/redux.html-dd4809bb.js"><link rel="modulepreload" href="/assets/redux.html-8854f819.js"><link rel="prefetch" href="/assets/index.html-0a05feab.js" as="script"><link rel="prefetch" href="/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/assets/index.html-4b3ba946.js" as="script"><link rel="prefetch" href="/assets/index.html-7d5141c6.js" as="script"><link rel="prefetch" href="/assets/index.html-e901a9ed.js" as="script"><link rel="prefetch" href="/assets/index.html-a316b0bd.js" as="script"><link rel="prefetch" href="/assets/index.html-1749fb6a.js" as="script"><link rel="prefetch" href="/assets/index.html-2bb678a3.js" as="script"><link rel="prefetch" href="/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/assets/index.html-19621242.js" as="script"><link rel="prefetch" href="/assets/index.html-e394c1fb.js" as="script"><link rel="prefetch" href="/assets/guide.html-2bd3c440.js" as="script"><link rel="prefetch" href="/assets/sandbox.html-ef07ee01.js" as="script"><link rel="prefetch" href="/assets/theoryOfReuse.html-9649369f.js" as="script"><link rel="prefetch" href="/assets/api.html-27cba026.js" as="script"><link rel="prefetch" href="/assets/home.html-bf77e58b.js" as="script"><link rel="prefetch" href="/assets/plugin.html-72181c86.js" as="script"><link rel="prefetch" href="/assets/theme.html-7eac97e5.js" as="script"><link rel="prefetch" href="/assets/index.html-972c709d.js" as="script"><link rel="prefetch" href="/assets/read-diary.html-bd88682e.js" as="script"><link rel="prefetch" href="/assets/index.html-bdb76c75.js" as="script"><link rel="prefetch" href="/assets/Tapable.html-ef4bd3d6.js" as="script"><link rel="prefetch" href="/assets/eslint.html-8eeeb38f.js" as="script"><link rel="prefetch" href="/assets/how-to-write-plugin.html-26a16415.js" as="script"><link rel="prefetch" href="/assets/monorepo.html-70bb8c94.js" as="script"><link rel="prefetch" href="/assets/plugins.html-f4d9b6b7.js" as="script"><link rel="prefetch" href="/assets/reuse-setting.html-a08d9eac.js" as="script"><link rel="prefetch" href="/assets/rollup-to-webpack.html-bef4cf12.js" as="script"><link rel="prefetch" href="/assets/trap-logs.html-41292df2.js" as="script"><link rel="prefetch" href="/assets/vite.html-c188fccf.js" as="script"><link rel="prefetch" href="/assets/webpack5.html-0079c59c.js" as="script"><link rel="prefetch" href="/assets/index.html-fb981e37.js" as="script"><link rel="prefetch" href="/assets/async.html-64bdbe7d.js" as="script"><link rel="prefetch" href="/assets/cssJs.html-c6257bc3.js" as="script"><link rel="prefetch" href="/assets/sandbox.html-5d068f54.js" as="script"><link rel="prefetch" href="/assets/ts.html-c38f0e12.js" as="script"><link rel="prefetch" href="/assets/index.html-98470643.js" as="script"><link rel="prefetch" href="/assets/stable.html-f793e933.js" as="script"><link rel="prefetch" href="/assets/index.html-08313da5.js" as="script"><link rel="prefetch" href="/assets/algorithm.html-e6a3339c.js" as="script"><link rel="prefetch" href="/assets/assemblyScript.html-cee11ecd.js" as="script"><link rel="prefetch" href="/assets/bun.html-3b95d89c.js" as="script"><link rel="prefetch" href="/assets/cache.html-9fb04a74.js" as="script"><link rel="prefetch" href="/assets/components-lib.html-966922c2.js" as="script"><link rel="prefetch" href="/assets/design-patterns.html-05416c1a.js" as="script"><link rel="prefetch" href="/assets/file-binary.html-46d0f07c.js" as="script"><link rel="prefetch" href="/assets/knowledge.html-449b7bdd.js" as="script"><link rel="prefetch" href="/assets/nginx.html-5984854b.js" as="script"><link rel="prefetch" href="/assets/npm-node.html-373f04d9.js" as="script"><link rel="prefetch" href="/assets/source-code.html-819750e0.js" as="script"><link rel="prefetch" href="/assets/unit-test.html-ac3c0aa9.js" as="script"><link rel="prefetch" href="/assets/index.html-10075918.js" as="script"><link rel="prefetch" href="/assets/base.html-b2029785.js" as="script"><link rel="prefetch" href="/assets/hooks.html-ce540784.js" as="script"><link rel="prefetch" href="/assets/middleware.html-48e69c38.js" as="script"><link rel="prefetch" href="/assets/mobx.html-7e37d327.js" as="script"><link rel="prefetch" href="/assets/react-router.html-c68bae0d.js" as="script"><link rel="prefetch" href="/assets/index.html-4b1b0ed0.js" as="script"><link rel="prefetch" href="/assets/Vue3.0.html-3534200c.js" as="script"><link rel="prefetch" href="/assets/cli.html-9baec691.js" as="script"><link rel="prefetch" href="/assets/error-handler.html-ff6d5f64.js" as="script"><link rel="prefetch" href="/assets/longest-increase-subline.html-586b5c11.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-654a1204.js" as="script"><link rel="prefetch" href="/assets/index.html-48cfe8c9.js" as="script"><link rel="prefetch" href="/assets/index.html-b04e44c1.js" as="script"><link rel="prefetch" href="/assets/index.html-aba221ce.js" as="script"><link rel="prefetch" href="/assets/index.html-bb7183dd.js" as="script"><link rel="prefetch" href="/assets/index.html-42e8a608.js" as="script"><link rel="prefetch" href="/assets/index.html-b7bfbfea.js" as="script"><link rel="prefetch" href="/assets/index.html-98cd4a74.js" as="script"><link rel="prefetch" href="/assets/index.html-360d1325.js" as="script"><link rel="prefetch" href="/assets/index.html-96af10a5.js" as="script"><link rel="prefetch" href="/assets/index.html-c7d63e14.js" as="script"><link rel="prefetch" href="/assets/guide.html-02e7363d.js" as="script"><link rel="prefetch" href="/assets/sandbox.html-cba9c395.js" as="script"><link rel="prefetch" href="/assets/theoryOfReuse.html-349c9cf6.js" as="script"><link rel="prefetch" href="/assets/api.html-b14d1526.js" as="script"><link rel="prefetch" href="/assets/home.html-a8f883ec.js" as="script"><link rel="prefetch" href="/assets/plugin.html-e19f8201.js" as="script"><link rel="prefetch" href="/assets/theme.html-7c037fdc.js" as="script"><link rel="prefetch" href="/assets/index.html-94f2d5d0.js" as="script"><link rel="prefetch" href="/assets/read-diary.html-08c34009.js" as="script"><link rel="prefetch" href="/assets/index.html-fe3662bb.js" as="script"><link rel="prefetch" href="/assets/Tapable.html-44652c7b.js" as="script"><link rel="prefetch" href="/assets/eslint.html-44df62bc.js" as="script"><link rel="prefetch" href="/assets/how-to-write-plugin.html-ec8e029b.js" as="script"><link rel="prefetch" href="/assets/monorepo.html-3c1dae37.js" as="script"><link rel="prefetch" href="/assets/plugins.html-a724d6a7.js" as="script"><link rel="prefetch" href="/assets/reuse-setting.html-712a7d0c.js" as="script"><link rel="prefetch" href="/assets/rollup-to-webpack.html-da01e196.js" as="script"><link rel="prefetch" href="/assets/trap-logs.html-d4e1eb68.js" as="script"><link rel="prefetch" href="/assets/vite.html-9444c037.js" as="script"><link rel="prefetch" href="/assets/webpack5.html-39f56e70.js" as="script"><link rel="prefetch" href="/assets/index.html-1481f25d.js" as="script"><link rel="prefetch" href="/assets/async.html-7aec1388.js" as="script"><link rel="prefetch" href="/assets/cssJs.html-1c61797d.js" as="script"><link rel="prefetch" href="/assets/sandbox.html-0de894d9.js" as="script"><link rel="prefetch" href="/assets/ts.html-7864bfd1.js" as="script"><link rel="prefetch" href="/assets/index.html-4bdeabef.js" as="script"><link rel="prefetch" href="/assets/stable.html-98209dd4.js" as="script"><link rel="prefetch" href="/assets/index.html-fa7e3828.js" as="script"><link rel="prefetch" href="/assets/algorithm.html-2ea9aa85.js" as="script"><link rel="prefetch" href="/assets/assemblyScript.html-c8803873.js" as="script"><link rel="prefetch" href="/assets/bun.html-cdd58b33.js" as="script"><link rel="prefetch" href="/assets/cache.html-56f34f29.js" as="script"><link rel="prefetch" href="/assets/components-lib.html-db6f8a22.js" as="script"><link rel="prefetch" href="/assets/design-patterns.html-bfb3b35f.js" as="script"><link rel="prefetch" href="/assets/file-binary.html-9a78da8f.js" as="script"><link rel="prefetch" href="/assets/knowledge.html-07098380.js" as="script"><link rel="prefetch" href="/assets/nginx.html-1511349b.js" as="script"><link rel="prefetch" href="/assets/npm-node.html-f5cbdd34.js" as="script"><link rel="prefetch" href="/assets/source-code.html-bb43b085.js" as="script"><link rel="prefetch" href="/assets/unit-test.html-f731bc4b.js" as="script"><link rel="prefetch" href="/assets/index.html-b38b9ba9.js" as="script"><link rel="prefetch" href="/assets/base.html-7713d326.js" as="script"><link rel="prefetch" href="/assets/hooks.html-e8877f3e.js" as="script"><link rel="prefetch" href="/assets/middleware.html-5fa14331.js" as="script"><link rel="prefetch" href="/assets/mobx.html-8070c0df.js" as="script"><link rel="prefetch" href="/assets/react-router.html-5fe4f6d7.js" as="script"><link rel="prefetch" href="/assets/index.html-2afcd663.js" as="script"><link rel="prefetch" href="/assets/Vue3.0.html-78fb4bf3.js" as="script"><link rel="prefetch" href="/assets/cli.html-68143691.js" as="script"><link rel="prefetch" href="/assets/error-handler.html-5aac1fba.js" as="script"><link rel="prefetch" href="/assets/longest-increase-subline.html-9e7edd56.js" as="script"><link rel="prefetch" href="/assets/404.html-4662783c.js" as="script"><link rel="prefetch" href="/assets/reco-valine-a195b6e9.js" as="script"><link rel="prefetch" href="/assets/giscus-2a044aea-497f0bd4.js" as="script">
    <link rel="preload" href="/assets/style-b1578374.css" as="style"><link rel="stylesheet" href="/assets/style-b1578374.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper series--no show-catalog"><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="/logo.png" alt="Daemon&#39;s Home"><a href="/" class="site-name can-hide">Daemon&#39;s Home</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="Home"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Home<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/reco/1/" class="link" aria-label="Categories"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Categories<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/tags/tag1/1/" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="Docs"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Docs<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="Docs"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Docs<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/theme-reco/theme" class="link" aria-label="vuepress-reco"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress-reco<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/blogs/other/theoryOfReuse" class="link" aria-label="vuepress-theme-reco"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress-theme-reco<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><!----><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="Home"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Home<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/reco/1/" class="link" aria-label="Categories"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Categories<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/tags/tag1/1/" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="Docs"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Docs<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="Docs"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Docs<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/theme-reco/theme" class="link" aria-label="vuepress-reco"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress-reco<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/blogs/other/theoryOfReuse" class="link" aria-label="vuepress-theme-reco"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress-theme-reco<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/logo.png" alt="Daemon&#39;s Home"><a href="/" class="site-name can-hide">Daemon&#39;s Home</a></div><!--[--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">redux</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->dongqingming<!--]--></span></span><!----><!----><!----><!----></div><div class="theme-reco-default-content"><div><h1 id="redux" tabindex="-1"><a class="header-anchor" href="#redux" aria-hidden="true">#</a> redux</h1><h2 id="redux思想" tabindex="-1"><a class="header-anchor" href="#redux思想" aria-hidden="true">#</a> redux思想</h2><ul><li>state</li><li>action</li><li>reducer</li></ul><h3 id="思想简介" tabindex="-1"><a class="header-anchor" href="#思想简介" aria-hidden="true">#</a> 思想简介</h3><blockquote><p>思想很简单</p></blockquote><p>1、state是什么？</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
  todos: [{
    text: &#39;eat&#39;
  }, {
    text: &#39;drink&#39;
  }],
  visibilityFilter: &#39;SHOW_COMPLETED&#39;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>所以是什么？状态树（一个包含所有状态的一个对象）。但是我们只能看不能动手改，也就是说我们可以取值不可以修改值，那我们是不是得需要有修改的能力？</p><p>蹡蹡</p><p>2、action出场，这是个什么？</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{type: &#39;ADD_TODO&#39;, text: &#39;play&#39;}
{type: &#39;TOGGLE_TODO&#39;, index: 1}
{type: &#39;SET_VISIBILITY_FILTER&#39;, filter: &#39;SHOW_ALL&#39;}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>action看起来很简单，有没有一种语义化代码的意思，好像看到一个对象就知道这是做什么的。对！这就是action的意义，一个是发起修改，二是告知你们我的修改细节。</p><p>但是。。。action也并没有真正的修改state，他只是描述了有事情发送了这一事实，这个时候需要一个方式衔接action和state</p><p>3、reducer出场</p><p>不难理解这就是一个函数，拿到state和action，然后返回一个新的state。  但是一个大的应用里我们不可能把所有的逻辑管理放在这样一个函数里，我们可以拆分很多小的函数各自管理各自的state，也就是拆分state tree。大概长这样。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>function visibilityFilter(state = &#39;SHOW_ALL&#39;, action) {
  if (action.type === &#39;SET_VISIBILITY_FILTER&#39;) {
    return action.filter
  } else {
    return state
  }
}

function todos(state = [], action) {
  switch (action.type) {
    case &#39;ADD_TODO&#39;:
      return state.concat([{text: action.text}])
    case &#39;TOGGLE_TODO&#39;:
      return state.map((todo, index) =&gt; {
        action.index === index
          ? {text: todo.text} 
          : todo
      })
    default:
      return state  
  }
}

// 再加一个reducer来调用这两个reducer
function todoApp(state = {}, action) {
  return {
    todos: todos(state.todos, action),
    visibilityFilter: visibilityFilter(state.visibilityFilter, action)
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关于reducer的注意点：如果状态有变化，一定要返回新的state；如果没有命中type，要返回默认的state来兜底</p><p>That&#39;s all! 是不是很简单啊。</p><h3 id="三个原则" tabindex="-1"><a class="header-anchor" href="#三个原则" aria-hidden="true">#</a> 三个原则</h3><ul><li>单一数据源，确保state的唯一性</li><li>state的修改只能来自action，store.dispatch(action)</li><li>reducer是个纯函数</li></ul><h3 id="store" tabindex="-1"><a class="header-anchor" href="#store" aria-hidden="true">#</a> store</h3><p>忘记介绍store</p><p>store是衔接state/action/reducer之间的对象。他有一些额外的方法：</p><ul><li>getState()</li><li>dispatch(action)</li><li>subscribe() 注册监听器</li><li>subscribe() 返回的函数注销监听器</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>import { createStore } from &#39;redux&#39;
import todoApp from &#39;./reducers&#39;

let store = createStore(todoApp)

// store 注入reducer然后调用方法执行action完成对state的更新
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="生命周期" tabindex="-1"><a class="header-anchor" href="#生命周期" aria-hidden="true">#</a> 生命周期</h3><ul><li>调用store.dispatch(action)</li><li>store调用传入的reducer</li><li>根reducer应该将多个子reducers的state合并成一个大的state</li><li>store保存了根reducer返回的state</li></ul><h2 id="provider" tabindex="-1"><a class="header-anchor" href="#provider" aria-hidden="true">#</a> provider</h2><p>提供一个容器，可以存放store。</p><h2 id="connect" tabindex="-1"><a class="header-anchor" href="#connect" aria-hidden="true">#</a> connect</h2><p>将store里的数据通过props透传给模板函数。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>const A = connect(
  mapStateToProps,
  mapDispatchToProps
)(template Fun)
// 最终在外层引用这个对象进行渲染
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="示例总结" tabindex="-1"><a class="header-anchor" href="#示例总结" aria-hidden="true">#</a> 示例总结</h2><ul><li>action定义最简单的行为：type &amp; 其他参数，type对应到reducers</li><li>reducers根据type处理state，返回新的state</li><li>总的reducers会combineReducers</li><li>connect可以将store和模板连接，而且store到props的逻辑都在connect之前处理，connect之后通过props获取</li></ul><h2 id="redux开发步骤" tabindex="-1"><a class="header-anchor" href="#redux开发步骤" aria-hidden="true">#</a> Redux开发步骤</h2><ul><li>Provider 引入store</li><li>Store示例化通过CreateStore(rootReducer)</li><li>rootReducer可以拆成几个store，分别存储 <ul><li>reducer是修改state的纯函数</li><li>并且不可以返回在state本身上面修改的结果，需要返回一个新的state</li></ul></li><li>action定义操作类型和修改值，通过dispatch调用，并且action的type与reducer里的type匹配</li><li>关键步骤：将模板和state连接，connect即可，两个参数mapStateToProps /mapDispatchToProps，将整个state中需要在本模板使用的参数和方法引用一下。注意：返回的是({})，不是函数。</li><li>此时，我们可以在模板里直接通过props调用定义在map里的key对应的值进行操作</li><li>reducer参与store的初始化，action放在map函数里通过dispatch调用，且调用dispatch的本质就是执行reducer的state修改</li></ul></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Last Updated 2023/11/2 下午7:45:51<!--]--></span></span></div></footer><!----><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs_old/react/redux.html#redux思想" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="redux思想"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->redux思想<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs_old/react/redux.html#思想简介" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="思想简介"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->思想简介<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs_old/react/redux.html#三个原则" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="三个原则"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->三个原则<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs_old/react/redux.html#store" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="store"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->store<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs_old/react/redux.html#生命周期" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="生命周期"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->生命周期<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs_old/react/redux.html#provider" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="provider"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->provider<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs_old/react/redux.html#connect" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="connect"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->connect<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs_old/react/redux.html#示例总结" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="示例总结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->示例总结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs_old/react/redux.html#redux开发步骤" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="Redux开发步骤"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Redux开发步骤<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-4f7908e3.js" defer></script>
  </body>
</html>
